application {
  config {
    applicationType monolith
    authenticationType session
    baseName pipeline
    blueprints []
    buildTool gradle
    cacheProvider ehcache
    clientFramework angularX
    clientPackageManager npm
    clientTheme sandstone
    clientThemeVariant primary
    creationTimestamp 1603669740451
    databaseType sql
    devDatabaseType h2Memory
    dtoSuffix DTO
    embeddableLaunchScript true
    enableHibernateCache true
    enableSwaggerCodegen true
    enableTranslation true
    jhiPrefix jhi
    jhipsterVersion "6.10.4"
    languages [en]
    messageBroker false
    nativeLanguage en
    otherModules []
    packageName io.github.bkosaraju.pipeline
    prodDatabaseType postgresql
    searchEngine false
    serverPort 8081
    serviceDiscoveryType false
    skipClient false
    skipServer false
    skipUserManagement false
    testFrameworks []
    useSass true
    websocket false
  }

  entities GlobalConfig, Job, JobConfig, JobExecution, JobTaskOrder, Task, TaskConfig, TaskExecution, TaskExecutionConfig
}

entity GlobalConfig {
  configKey String,
  configValue String,
  configType ConfigType
}
entity Job {
  jobName String,
  jobId Integer,
  jobStatusFlag Boolean,
  createTimestamp ZonedDateTime
}
entity JobConfig {
  configKey String,
  configValue String,
  configType ConfigType
}
entity JobExecution {
  jobOrderTimestamp ZonedDateTime,
  jobExecutionStatus String,
  jobExecutionEndTimestamp ZonedDateTime,
  jobExecutionStartTimestamp ZonedDateTime
}
entity JobTaskOrder {
  taskSeqId Integer,
  jobTaskStatusFlag Boolean,
  configVersion Float
}
entity Task {
  taskName String,
  taskId Integer,
  taskType TaskType,
  createTimestamp ZonedDateTime
}
entity TaskConfig {
  configKey String,
  configValue String,
  configType ConfigType,
  configVersion Float
}
entity TaskExecution {
  jobOrderTimestamp ZonedDateTime,
  taskExecutionStatus String,
  taskExecutionStartTimestamp ZonedDateTime,
  taskExecutionEndTimestamp ZonedDateTime
}
entity TaskExecutionConfig {
  configKey String,
  configValue String,
  configVersion Float
}
enum ConfigType {
  STATIC,
  AWS_SSM,
  HASHICORP_VAULT
}
enum TaskType {
  SFTP,
  SHELL,
  SPARK,
  S3COPY,
  S3PUSH,
  SPARK_ON_DATABRICS,
  SPARK_ON_KUBERNETES,
  SPARK_ON_EMR
}

relationship OneToMany {
  Job{jobConfig} to JobConfig{job(jobId)},
  Task{taskConfig} to TaskConfig{task(taskId)},
  JobExecution{taskExecution} to TaskExecution{jobExecution},
  TaskExecution{taskExecutionConfig} to TaskExecutionConfig{taskExecution}
}
relationship ManyToOne {
  JobExecution{job(jobId)} to Job,
  JobTaskOrder{job(jobId)} to Job,
  JobTaskOrder{task(taskId)} to Task,
  TaskExecution{task(taskId)} to Task
}

paginate GlobalConfig, Job, JobConfig, JobExecution, JobTaskOrder, Task, TaskConfig, TaskExecution, TaskExecutionConfig with pagination
service GlobalConfig, Job, JobConfig, JobExecution, JobTaskOrder, Task, TaskConfig, TaskExecution, TaskExecutionConfig with serviceImpl
filter GlobalConfig, Job, JobConfig, JobExecution, JobTaskOrder, Task, TaskConfig, TaskExecution, TaskExecutionConfig
